{"version":3,"file":"index.umd.js","sources":["../node_modules/insert-css/index.js","../node_modules/penpal/lib/enums.js","../node_modules/penpal/lib/createDestructor.js","../node_modules/penpal/lib/createLogger.js","../node_modules/penpal/lib/parent/getOriginFromSrc.js","../node_modules/penpal/lib/errorSerialization.js","../node_modules/penpal/lib/connectCallReceiver.js","../node_modules/penpal/lib/generateId.js","../node_modules/penpal/lib/methodSerialization.js","../node_modules/penpal/lib/connectCallSender.js","../node_modules/penpal/lib/parent/handleAckMessageFactory.js","../node_modules/penpal/lib/parent/handleSynMessageFactory.js","../node_modules/penpal/lib/parent/monitorIframeRemoval.js","../node_modules/penpal/lib/startConnectionTimeout.js","../node_modules/penpal/lib/parent/validateIframeHasSrcOrSrcDoc.js","../node_modules/penpal/lib/parent/connectToChild.js","../node_modules/when-dom-ready/dist/index.es2015.js","../src/lib/useCsvPlugin.ts"],"sourcesContent":["var containers = []; // will store container HTMLElement references\nvar styleElements = []; // will store {prepend: HTMLElement, append: HTMLElement}\n\nvar usage = 'insert-css: You need to provide a CSS string. Usage: insertCss(cssString[, options]).';\n\nfunction insertCss(css, options) {\n    options = options || {};\n\n    if (css === undefined) {\n        throw new Error(usage);\n    }\n\n    var position = options.prepend === true ? 'prepend' : 'append';\n    var container = options.container !== undefined ? options.container : document.querySelector('head');\n    var containerId = containers.indexOf(container);\n\n    // first time we see this container, create the necessary entries\n    if (containerId === -1) {\n        containerId = containers.push(container) - 1;\n        styleElements[containerId] = {};\n    }\n\n    // try to get the correponding container + position styleElement, create it otherwise\n    var styleElement;\n\n    if (styleElements[containerId] !== undefined && styleElements[containerId][position] !== undefined) {\n        styleElement = styleElements[containerId][position];\n    } else {\n        styleElement = styleElements[containerId][position] = createStyleElement();\n\n        if (position === 'prepend') {\n            container.insertBefore(styleElement, container.childNodes[0]);\n        } else {\n            container.appendChild(styleElement);\n        }\n    }\n\n    // strip potential UTF-8 BOM if css was read from a file\n    if (css.charCodeAt(0) === 0xFEFF) { css = css.substr(1, css.length); }\n\n    // actually add the stylesheet\n    if (styleElement.styleSheet) {\n        styleElement.styleSheet.cssText += css\n    } else {\n        styleElement.textContent += css;\n    }\n\n    return styleElement;\n};\n\nfunction createStyleElement() {\n    var styleElement = document.createElement('style');\n    styleElement.setAttribute('type', 'text/css');\n    return styleElement;\n}\n\nmodule.exports = insertCss;\nmodule.exports.insertCss = insertCss;\n","export var MessageType;\n(function (MessageType) {\n    MessageType[\"Call\"] = \"call\";\n    MessageType[\"Reply\"] = \"reply\";\n    MessageType[\"Syn\"] = \"syn\";\n    MessageType[\"SynAck\"] = \"synAck\";\n    MessageType[\"Ack\"] = \"ack\";\n})(MessageType || (MessageType = {}));\nexport var Resolution;\n(function (Resolution) {\n    Resolution[\"Fulfilled\"] = \"fulfilled\";\n    Resolution[\"Rejected\"] = \"rejected\";\n})(Resolution || (Resolution = {}));\nexport var ErrorCode;\n(function (ErrorCode) {\n    ErrorCode[\"ConnectionDestroyed\"] = \"ConnectionDestroyed\";\n    ErrorCode[\"ConnectionTimeout\"] = \"ConnectionTimeout\";\n    ErrorCode[\"NoIframeSrc\"] = \"NoIframeSrc\";\n})(ErrorCode || (ErrorCode = {}));\nexport var NativeErrorName;\n(function (NativeErrorName) {\n    NativeErrorName[\"DataCloneError\"] = \"DataCloneError\";\n})(NativeErrorName || (NativeErrorName = {}));\nexport var NativeEventType;\n(function (NativeEventType) {\n    NativeEventType[\"Message\"] = \"message\";\n})(NativeEventType || (NativeEventType = {}));\n","export default (localName, log) => {\n    const callbacks = [];\n    let destroyed = false;\n    return {\n        destroy(error) {\n            if (!destroyed) {\n                destroyed = true;\n                log(`${localName}: Destroying connection`);\n                callbacks.forEach((callback) => {\n                    callback(error);\n                });\n            }\n        },\n        onDestroy(callback) {\n            destroyed ? callback() : callbacks.push(callback);\n        },\n    };\n};\n","export default (debug) => {\n    /**\n     * Logs a message if debug is enabled.\n     */\n    return (...args) => {\n        if (debug) {\n            console.log('[Penpal]', ...args); // eslint-disable-line no-console\n        }\n    };\n};\n","const DEFAULT_PORT_BY_PROTOCOL = {\n    'http:': '80',\n    'https:': '443',\n};\nconst URL_REGEX = /^(https?:)?\\/\\/([^/:]+)?(:(\\d+))?/;\nconst opaqueOriginSchemes = ['file:', 'data:'];\n/**\n * Converts a src value into an origin.\n */\nexport default (src) => {\n    if (src && opaqueOriginSchemes.find((scheme) => src.startsWith(scheme))) {\n        // The origin of the child document is an opaque origin and its\n        // serialization is \"null\"\n        // https://html.spec.whatwg.org/multipage/origin.html#origin\n        return 'null';\n    }\n    // Note that if src is undefined, then srcdoc is being used instead of src\n    // and we can follow this same logic below to get the origin of the parent,\n    // which is the origin that we will need to use.\n    const location = document.location;\n    const regexResult = URL_REGEX.exec(src);\n    let protocol;\n    let hostname;\n    let port;\n    if (regexResult) {\n        // It's an absolute URL. Use the parsed info.\n        // regexResult[1] will be undefined if the URL starts with //\n        protocol = regexResult[1] ? regexResult[1] : location.protocol;\n        hostname = regexResult[2];\n        port = regexResult[4];\n    }\n    else {\n        // It's a relative path. Use the current location's info.\n        protocol = location.protocol;\n        hostname = location.hostname;\n        port = location.port;\n    }\n    // If the port is the default for the protocol, we don't want to add it to the origin string\n    // or it won't match the message's event.origin.\n    const portSuffix = port && port !== DEFAULT_PORT_BY_PROTOCOL[protocol] ? `:${port}` : '';\n    return `${protocol}//${hostname}${portSuffix}`;\n};\n","/**\n * Converts an error object into a plain object.\n */\nexport const serializeError = ({ name, message, stack, }) => ({\n    name,\n    message,\n    stack,\n});\n/**\n * Converts a plain object into an error object.\n */\nexport const deserializeError = (obj) => {\n    const deserializedError = new Error();\n    // @ts-ignore\n    Object.keys(obj).forEach((key) => (deserializedError[key] = obj[key]));\n    return deserializedError;\n};\n","import { serializeError } from './errorSerialization';\nimport { MessageType, NativeEventType, NativeErrorName, Resolution, } from './enums';\n/**\n * Listens for \"call\" messages coming from the remote, executes the corresponding method, and\n * responds with the return value.\n */\nexport default (info, serializedMethods, log) => {\n    const { localName, local, remote, originForSending, originForReceiving, } = info;\n    let destroyed = false;\n    const handleMessageEvent = (event) => {\n        if (event.source !== remote || event.data.penpal !== MessageType.Call) {\n            return;\n        }\n        if (originForReceiving !== '*' && event.origin !== originForReceiving) {\n            log(`${localName} received message from origin ${event.origin} which did not match expected origin ${originForReceiving}`);\n            return;\n        }\n        const callMessage = event.data;\n        const { methodName, args, id } = callMessage;\n        log(`${localName}: Received ${methodName}() call`);\n        const createPromiseHandler = (resolution) => {\n            return (returnValue) => {\n                log(`${localName}: Sending ${methodName}() reply`);\n                if (destroyed) {\n                    // It's possible to throw an error here, but it would need to be thrown asynchronously\n                    // and would only be catchable using window.onerror. This is because the consumer\n                    // is merely returning a value from their method and not calling any function\n                    // that they could wrap in a try-catch. Even if the consumer were to catch the error,\n                    // the value of doing so is questionable. Instead, we'll just log a message.\n                    log(`${localName}: Unable to send ${methodName}() reply due to destroyed connection`);\n                    return;\n                }\n                const message = {\n                    penpal: MessageType.Reply,\n                    id,\n                    resolution,\n                    returnValue,\n                };\n                if (resolution === Resolution.Rejected &&\n                    returnValue instanceof Error) {\n                    message.returnValue = serializeError(returnValue);\n                    message.returnValueIsError = true;\n                }\n                try {\n                    remote.postMessage(message, originForSending);\n                }\n                catch (err) {\n                    // If a consumer attempts to send an object that's not cloneable (e.g., window),\n                    // we want to ensure the receiver's promise gets rejected.\n                    if (err.name === NativeErrorName.DataCloneError) {\n                        const errorReplyMessage = {\n                            penpal: MessageType.Reply,\n                            id,\n                            resolution: Resolution.Rejected,\n                            returnValue: serializeError(err),\n                            returnValueIsError: true,\n                        };\n                        remote.postMessage(errorReplyMessage, originForSending);\n                    }\n                    throw err;\n                }\n            };\n        };\n        new Promise((resolve) => resolve(serializedMethods[methodName].apply(serializedMethods, args))).then(createPromiseHandler(Resolution.Fulfilled), createPromiseHandler(Resolution.Rejected));\n    };\n    local.addEventListener(NativeEventType.Message, handleMessageEvent);\n    return () => {\n        destroyed = true;\n        local.removeEventListener(NativeEventType.Message, handleMessageEvent);\n    };\n};\n","let id = 0;\n/**\n * @return {number} A unique ID (not universally unique)\n */\nexport default () => ++id;\n","const KEY_PATH_DELIMITER = '.';\nconst keyPathToSegments = (keyPath) => keyPath ? keyPath.split(KEY_PATH_DELIMITER) : [];\nconst segmentsToKeyPath = (segments) => segments.join(KEY_PATH_DELIMITER);\nconst createKeyPath = (key, prefix) => {\n    const segments = keyPathToSegments(prefix || '');\n    segments.push(key);\n    return segmentsToKeyPath(segments);\n};\n/**\n * Given a `keyPath`, set it to be `value` on `subject`, creating any intermediate\n * objects along the way.\n *\n * @param {Object} subject The object on which to set value.\n * @param {string} keyPath The key path at which to set value.\n * @param {Object} value The value to store at the given key path.\n * @returns {Object} Updated subject.\n */\nexport const setAtKeyPath = (subject, keyPath, value) => {\n    const segments = keyPathToSegments(keyPath);\n    segments.reduce((prevSubject, key, idx) => {\n        if (typeof prevSubject[key] === 'undefined') {\n            prevSubject[key] = {};\n        }\n        if (idx === segments.length - 1) {\n            prevSubject[key] = value;\n        }\n        return prevSubject[key];\n    }, subject);\n    return subject;\n};\n/**\n * Given a dictionary of (nested) keys to function, flatten them to a map\n * from key path to function.\n *\n * @param {Object} methods The (potentially nested) object to serialize.\n * @param {string} prefix A string with which to prefix entries. Typically not intended to be used by consumers.\n * @returns {Object} An map from key path in `methods` to functions.\n */\nexport const serializeMethods = (methods, prefix) => {\n    const flattenedMethods = {};\n    Object.keys(methods).forEach((key) => {\n        const value = methods[key];\n        const keyPath = createKeyPath(key, prefix);\n        if (typeof value === 'object') {\n            // Recurse into any nested children.\n            Object.assign(flattenedMethods, serializeMethods(value, keyPath));\n        }\n        if (typeof value === 'function') {\n            // If we've found a method, expose it.\n            flattenedMethods[keyPath] = value;\n        }\n    });\n    return flattenedMethods;\n};\n/**\n * Given a map of key paths to functions, unpack the key paths to an object.\n *\n * @param {Object} flattenedMethods A map of key paths to functions to unpack.\n * @returns {Object} A (potentially nested) map of functions.\n */\nexport const deserializeMethods = (flattenedMethods) => {\n    const methods = {};\n    for (const keyPath in flattenedMethods) {\n        setAtKeyPath(methods, keyPath, flattenedMethods[keyPath]);\n    }\n    return methods;\n};\n","import generateId from './generateId';\nimport { deserializeError } from './errorSerialization';\nimport { deserializeMethods } from './methodSerialization';\nimport { ErrorCode, MessageType, NativeEventType, Resolution } from './enums';\n/**\n * Augments an object with methods that match those defined by the remote. When these methods are\n * called, a \"call\" message will be sent to the remote, the remote's corresponding method will be\n * executed, and the method's return value will be returned via a message.\n * @param {Object} callSender Sender object that should be augmented with methods.\n * @param {Object} info Information about the local and remote windows.\n * @param {Array} methodKeyPaths Key paths of methods available to be called on the remote.\n * @param {Promise} destructionPromise A promise resolved when destroy() is called on the penpal\n * connection.\n * @returns {Object} The call sender object with methods that may be called.\n */\nexport default (callSender, info, methodKeyPaths, destroyConnection, log) => {\n    const { localName, local, remote, originForSending, originForReceiving, } = info;\n    let destroyed = false;\n    log(`${localName}: Connecting call sender`);\n    const createMethodProxy = (methodName) => {\n        return (...args) => {\n            log(`${localName}: Sending ${methodName}() call`);\n            // This handles the case where the iframe has been removed from the DOM\n            // (and therefore its window closed), the consumer has not yet\n            // called destroy(), and the user calls a method exposed by\n            // the remote. We detect the iframe has been removed and force\n            // a destroy() immediately so that the consumer sees the error saying\n            // the connection has been destroyed. We wrap this check in a try catch\n            // because Edge throws an \"Object expected\" error when accessing\n            // contentWindow.closed on a contentWindow from an iframe that's been\n            // removed from the DOM.\n            let iframeRemoved;\n            try {\n                if (remote.closed) {\n                    iframeRemoved = true;\n                }\n            }\n            catch (e) {\n                iframeRemoved = true;\n            }\n            if (iframeRemoved) {\n                destroyConnection();\n            }\n            if (destroyed) {\n                const error = new Error(`Unable to send ${methodName}() call due ` + `to destroyed connection`);\n                error.code = ErrorCode.ConnectionDestroyed;\n                throw error;\n            }\n            return new Promise((resolve, reject) => {\n                const id = generateId();\n                const handleMessageEvent = (event) => {\n                    if (event.source !== remote ||\n                        event.data.penpal !== MessageType.Reply ||\n                        event.data.id !== id) {\n                        return;\n                    }\n                    if (originForReceiving !== '*' &&\n                        event.origin !== originForReceiving) {\n                        log(`${localName} received message from origin ${event.origin} which did not match expected origin ${originForReceiving}`);\n                        return;\n                    }\n                    const replyMessage = event.data;\n                    log(`${localName}: Received ${methodName}() reply`);\n                    local.removeEventListener(NativeEventType.Message, handleMessageEvent);\n                    let returnValue = replyMessage.returnValue;\n                    if (replyMessage.returnValueIsError) {\n                        returnValue = deserializeError(returnValue);\n                    }\n                    (replyMessage.resolution === Resolution.Fulfilled ? resolve : reject)(returnValue);\n                };\n                local.addEventListener(NativeEventType.Message, handleMessageEvent);\n                const callMessage = {\n                    penpal: MessageType.Call,\n                    id,\n                    methodName,\n                    args,\n                };\n                remote.postMessage(callMessage, originForSending);\n            });\n        };\n    };\n    // Wrap each method in a proxy which sends it to the corresponding receiver.\n    const flattenedMethods = methodKeyPaths.reduce((api, name) => {\n        api[name] = createMethodProxy(name);\n        return api;\n    }, {});\n    // Unpack the structure of the provided methods object onto the CallSender, exposing\n    // the methods in the same shape they were provided.\n    Object.assign(callSender, deserializeMethods(flattenedMethods));\n    return () => {\n        destroyed = true;\n    };\n};\n","import connectCallReceiver from '../connectCallReceiver';\nimport connectCallSender from '../connectCallSender';\n/**\n * Handles an ACK handshake message.\n */\nexport default (serializedMethods, childOrigin, originForSending, destructor, log) => {\n    const { destroy, onDestroy } = destructor;\n    let destroyCallReceiver;\n    let receiverMethodNames;\n    // We resolve the promise with the call sender. If the child reconnects\n    // (for example, after refreshing or navigating to another page that\n    // uses Penpal, we'll update the call sender with methods that match the\n    // latest provided by the child.\n    const callSender = {};\n    return (event) => {\n        if (childOrigin !== '*' && event.origin !== childOrigin) {\n            log(`Parent: Handshake - Received ACK message from origin ${event.origin} which did not match expected origin ${childOrigin}`);\n            return;\n        }\n        log('Parent: Handshake - Received ACK');\n        const info = {\n            localName: 'Parent',\n            local: window,\n            remote: event.source,\n            originForSending: originForSending,\n            originForReceiving: childOrigin,\n        };\n        // If the child reconnected, we need to destroy the prior call receiver\n        // before setting up a new one.\n        if (destroyCallReceiver) {\n            destroyCallReceiver();\n        }\n        destroyCallReceiver = connectCallReceiver(info, serializedMethods, log);\n        onDestroy(destroyCallReceiver);\n        // If the child reconnected, we need to remove the methods from the\n        // previous call receiver off the sender.\n        if (receiverMethodNames) {\n            receiverMethodNames.forEach((receiverMethodName) => {\n                delete callSender[receiverMethodName];\n            });\n        }\n        receiverMethodNames = event.data.methodNames;\n        const destroyCallSender = connectCallSender(callSender, info, receiverMethodNames, destroy, log);\n        onDestroy(destroyCallSender);\n        return callSender;\n    };\n};\n","import { MessageType } from '../enums';\n/**\n * Handles a SYN handshake message.\n */\nexport default (log, serializedMethods, childOrigin, originForSending) => {\n    return (event) => {\n        // Under specific timing circumstances, we can receive an event\n        // whose source is null. This seems to happen when the child iframe is\n        // removed from the DOM about the same time it has sent the SYN event.\n        // https://github.com/Aaronius/penpal/issues/85\n        if (!event.source) {\n            return;\n        }\n        if (childOrigin !== '*' && event.origin !== childOrigin) {\n            log(`Parent: Handshake - Received SYN message from origin ${event.origin} which did not match expected origin ${childOrigin}`);\n            return;\n        }\n        log('Parent: Handshake - Received SYN, responding with SYN-ACK');\n        const synAckMessage = {\n            penpal: MessageType.SynAck,\n            methodNames: Object.keys(serializedMethods),\n        };\n        event.source.postMessage(synAckMessage, originForSending);\n    };\n};\n","const CHECK_IFRAME_IN_DOC_INTERVAL = 60000;\n/**\n * Monitors for iframe removal and destroys connection if iframe\n * is found to have been removed from DOM. This is to prevent memory\n * leaks when the iframe is removed from the document and the consumer\n * hasn't called destroy(). Without this, event listeners attached to\n * the window would stick around and since the event handlers have a\n * reference to the iframe in their closures, the iframe would stick\n * around too.\n */\nexport default (iframe, destructor) => {\n    const { destroy, onDestroy } = destructor;\n    const checkIframeInDocIntervalId = setInterval(() => {\n        if (!iframe.isConnected) {\n            clearInterval(checkIframeInDocIntervalId);\n            destroy();\n        }\n    }, CHECK_IFRAME_IN_DOC_INTERVAL);\n    onDestroy(() => {\n        clearInterval(checkIframeInDocIntervalId);\n    });\n};\n","import { ErrorCode } from './enums';\n/**\n * Starts a timeout and calls the callback with an error\n * if the timeout completes before the stop function is called.\n */\nexport default (timeout, callback) => {\n    let timeoutId;\n    if (timeout !== undefined) {\n        timeoutId = window.setTimeout(() => {\n            const error = new Error(`Connection timed out after ${timeout}ms`);\n            error.code = ErrorCode.ConnectionTimeout;\n            callback(error);\n        }, timeout);\n    }\n    return () => {\n        clearTimeout(timeoutId);\n    };\n};\n","import { ErrorCode } from '../enums';\nexport default (iframe) => {\n    if (!iframe.src && !iframe.srcdoc) {\n        const error = new Error('Iframe must have src or srcdoc property defined.');\n        error.code = ErrorCode.NoIframeSrc;\n        throw error;\n    }\n};\n","import { MessageType, NativeEventType } from '../enums';\nimport createDestructor from '../createDestructor';\nimport createLogger from '../createLogger';\nimport getOriginFromSrc from './getOriginFromSrc';\nimport handleAckMessageFactory from './handleAckMessageFactory';\nimport handleSynMessageFactory from './handleSynMessageFactory';\nimport { serializeMethods } from '../methodSerialization';\nimport monitorIframeRemoval from './monitorIframeRemoval';\nimport startConnectionTimeout from '../startConnectionTimeout';\nimport validateIframeHasSrcOrSrcDoc from './validateIframeHasSrcOrSrcDoc';\n/**\n * Attempts to establish communication with an iframe.\n */\nexport default (options) => {\n    let { iframe, methods = {}, childOrigin, timeout, debug = false } = options;\n    const log = createLogger(debug);\n    const destructor = createDestructor('Parent', log);\n    const { onDestroy, destroy } = destructor;\n    if (!childOrigin) {\n        validateIframeHasSrcOrSrcDoc(iframe);\n        childOrigin = getOriginFromSrc(iframe.src);\n    }\n    // If event.origin is \"null\", the remote protocol is file: or data: and we\n    // must post messages with \"*\" as targetOrigin when sending messages.\n    // https://developer.mozilla.org/en-US/docs/Web/API/Window/postMessage#Using_window.postMessage_in_extensions\n    const originForSending = childOrigin === 'null' ? '*' : childOrigin;\n    const serializedMethods = serializeMethods(methods);\n    const handleSynMessage = handleSynMessageFactory(log, serializedMethods, childOrigin, originForSending);\n    const handleAckMessage = handleAckMessageFactory(serializedMethods, childOrigin, originForSending, destructor, log);\n    const promise = new Promise((resolve, reject) => {\n        const stopConnectionTimeout = startConnectionTimeout(timeout, destroy);\n        const handleMessage = (event) => {\n            if (event.source !== iframe.contentWindow || !event.data) {\n                return;\n            }\n            if (event.data.penpal === MessageType.Syn) {\n                handleSynMessage(event);\n                return;\n            }\n            if (event.data.penpal === MessageType.Ack) {\n                const callSender = handleAckMessage(event);\n                if (callSender) {\n                    stopConnectionTimeout();\n                    resolve(callSender);\n                }\n                return;\n            }\n        };\n        window.addEventListener(NativeEventType.Message, handleMessage);\n        log('Parent: Awaiting handshake');\n        monitorIframeRemoval(iframe, destructor);\n        onDestroy((error) => {\n            window.removeEventListener(NativeEventType.Message, handleMessage);\n            if (error) {\n                reject(error);\n            }\n        });\n    });\n    return {\n        promise,\n        destroy() {\n            // Don't allow consumer to pass an error into destroy.\n            destroy();\n        },\n    };\n};\n","/* eslint no-void: \"off\" */\n\n// Loaded ready states\nvar loadedStates = ['interactive', 'complete'];\n\n// Return Promise\nvar whenDomReady = function whenDomReady(cb, doc) {\n\treturn new Promise(function (resolve) {\n\t\t// Allow doc to be passed in as the lone first param\n\t\tif (cb && typeof cb !== 'function') {\n\t\t\tdoc = cb;\n\t\t\tcb = null;\n\t\t}\n\n\t\t// Use global document if we don't have one\n\t\tdoc = doc || window.document;\n\n\t\t// Handle DOM load\n\t\tvar done = function done() {\n\t\t\treturn resolve(void (cb && setTimeout(cb)));\n\t\t};\n\n\t\t// Resolve now if DOM has already loaded\n\t\t// Otherwise wait for DOMContentLoaded\n\t\tif (loadedStates.indexOf(doc.readyState) !== -1) {\n\t\t\tdone();\n\t\t} else {\n\t\t\tdoc.addEventListener('DOMContentLoaded', done);\n\t\t}\n\t});\n};\n\n// Promise chain helper\nwhenDomReady.resume = function (doc) {\n\treturn function (val) {\n\t\treturn whenDomReady(doc).then(function () {\n\t\t\treturn val;\n\t\t});\n\t};\n};\n\nexport default whenDomReady;\n//# sourceMappingURL=index.es2015.js.map\n","import { insertCss } from \"insert-css\";\nimport { connectToChild } from \"penpal\";\nimport whenDomReady from \"when-dom-ready\";\n\nimport type {\n  CsvData,\n  DynamicColumnsType,\n  onDataResponseWithBatching,\n  onDataResponseWithoutBatching,\n  onRecordEditType,\n  onRecordsInitialType,\n  ThemeType,\n} from \"./types\";\n\n// eslint-disable-next-line dot-notation\nconst MOUNT_URL = process.env[\"MOUNT_URL\"] || \"http://localhost:3000/importer\";\n\nconst insertIframe = (id: string, importerDisplay: \"inline\" | \"modal\") => {\n  const usecsvInlineWrapper = document.getElementById(\"usecsv-importer-inline-wrapper\");\n\n  const usecsvContainerStyles =\n    importerDisplay === \"modal\" || !usecsvInlineWrapper\n      ? `.usecsv_container { position: fixed; top: 0px; bottom: 0; right: 0; left: 0; z-index: 100000; }`\n      : ``;\n\n  insertCss(`\n  ${usecsvContainerStyles}\n  .usecsv_container iframe {\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    border-width: 0;\n  }\n  .usecsv_container {\n    overflow: hidden;\n    overscroll-behavior-x: none;\n  }\n`);\n\n  document.body.insertAdjacentHTML(\"beforeend\", `<div id=${id} class=\"usecsv_container loading\"></div>`);\n  const iframe = document.createElement(\"iframe\");\n  iframe.setAttribute(\"src\", MOUNT_URL);\n  const usecsvContainer = document.getElementById(id);\n  usecsvContainer?.appendChild(iframe);\n  if (importerDisplay === \"inline\" && usecsvInlineWrapper) {\n    // usecsvInlineWrapper > usecsvContainer > iframe\n    usecsvInlineWrapper?.appendChild(usecsvContainer as HTMLElement);\n  }\n\n  return iframe;\n};\n\nconst useCsvPlugin = ({\n  importerKey,\n  user,\n  metadata,\n  onData,\n  onRecordsInitial,\n  onRecordEdit,\n  importerDisplay = \"modal\",\n  onClose,\n  theme,\n  batchSize,\n  sampleFileURL,\n  downloadExampleButton = true,\n  dynamicColumns,\n}: {\n  importerKey: string;\n  user?: Record<string, string | number>;\n  metadata?: Record<string, string | number>;\n  onData?: (data: CsvData, close: () => void) => void | onDataResponseWithoutBatching | onDataResponseWithBatching;\n  onRecordsInitial?: onRecordsInitialType;\n  onRecordEdit?: onRecordEditType;\n  importerDisplay?: \"modal\" | \"inline\";\n  onClose?: () => void;\n  theme?: ThemeType;\n  batchSize?: number;\n  sampleFileURL?: string;\n  downloadExampleButton?: boolean;\n  dynamicColumns?: DynamicColumnsType;\n}) => {\n  const id = `usecsv-${Math.round(Math.random() * 100000000)}`;\n  return whenDomReady().then(() => {\n    const iframe = insertIframe(id, importerDisplay);\n    const closeIframe = () => {\n      document.getElementById(id)?.remove();\n    };\n    const iframeConnection = connectToChild({\n      iframe,\n      methods: {\n        closeIframe,\n        ...(onData\n          ? {\n              onData: (data: CsvData) => onData(data, closeIframe),\n            }\n          : {}),\n        ...(onRecordsInitial\n          ? {\n              onRecordsInitial,\n            }\n          : {}),\n        ...(onRecordEdit\n          ? {\n              onRecordEdit,\n            }\n          : {}),\n        ...(onClose\n          ? {\n              onClose,\n            }\n          : {}),\n      },\n    });\n    iframeConnection.promise.then((child: any) => {\n      document.getElementById(id)?.classList.remove(\"loading\");\n      // eslint-disable-next-line dot-notation\n      child[\"setParams\"] &&\n        // eslint-disable-next-line dot-notation\n        child[\"setParams\"]({\n          importerKey,\n          user,\n          metadata,\n          importerDisplay,\n          theme,\n          batchSize,\n          sampleFileURL,\n          downloadExampleButton,\n          dynamicColumns,\n        });\n    });\n    return iframeConnection;\n  });\n};\n\nexport default useCsvPlugin;\n"],"names":["insertCss"],"mappings":"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"}